/*Practica final
version 0.0.0.0.1
Jose Doyague Hernandez y Luis Buegos Vidales
*/

typedef struct datos{
  char  *imagen;
}dato

typedef struct nodo {
  struct nodo *nodo_siguiente;
  dato nombre;
  struct nodo *nodo_anterior;
}

nodo* insertaFinal(nodo *nuevoNodo, nodo *ptrFinal, *ptrCabecera);//inserta al final
void mostrarLista(nodo *ptrCabecera, nodo *ptrFinal);
void visualiza(datos fotografias);


/*MAIN*/
int main(int argc, char const *argv[]) {
  //leemos datos de un fichero y los metemos en una lista
  FILE *fichero;
  dato fotografias;
  nodo *ptrCabecera, *ptrFinal;
  ptrCabecera = NULL;
  ptrFinal = NULL;

/*cambiar por ejemplo del directorio de la Practica*/
/**/  fichero = fopen("fotografias.txt", "r");// en la misma carpeta que el main
/**/ /*-------------LECTURA---DE----DATOS--------------------------*/
/**/      while(!feof(fichero)){
/**/        fscanf(fichero, "%s", fotografias.imagen);
/**/
/**/
/*HASTA ESTE PUNTO */
 /*---------------------INICIO----LISTA---------------------*/
       if(!feof(fichero)){
        nodo *nuevoNodo;
        nuevoNodo = (nodo *)malloc(sizeof(nodo));//reservamos espacio para el nuevo nodo
        nuevoNodo->nombre = fotografias;// guardamos la estructura en el nodo
        nuevoNodo->nodo_anterior = NULL; // el puntero que apunta al siguiente nodo lo ponemos a null
        nuevoNodo->nodo_siguiente = NULL;

        if (ptrCabecera == NULL){//si no hay mas nodos lo metemos detras detras de la cabecera
            ptrCabecera = nuevoNodo;
        }
       ptrFinal = insertaFinal(nuevoNodo, ptrFinal, ptrCabecera);//inserta final cambia los punteros de final e inicio para que se coloquen al final.
      }
    }
 /*----------FIN----LISTA---------*/
   fclose(fichero);// cerramos el fichero
   mostrarLista(ptrCabecera);
   return 0;








  do {
      switch (menu) {
        case 1:

              break;
        case 2:

              break;
        case 3:

              break;
        case 4:
              printf("Saliendo del programa\n");
              break;
        default:

              break;


      }

  } while(menu == 4);

  return 0;
}//MAIN


void mostrarLista(nodo *ptrCabecera, nodo *ptrFinal){//muestra la lista
    if(ptrCabecera == NULL){// excepcion
        printf("\n========================\n Fichero de datos vacio\n========================\n");
    }
    else{
        nodo *ptrSiguiente = ptrCabecera;
        while(ptrSiguiente != NULL || ptrSiguiente == ptrFinal){
            visualiza(ptrSiguiente->datos);
            ptrSiguiente = ptrSiguiente->nodo_siguiente;
        }
    }
}



void visualiza(datos fotografias){
    printf("\nNombre fotos: %s", fotografias.imagen);
}




nodo* insertaFinal(nodo *nuevoNodo, nodo *ptrFinal, *ptrCabecera){//inserta al final
  if(ptrFinal == NULL){
    return nuevoNodo;
  }
  else{
    ptrFinal->nodo_siguiente = nuevoNodo;
    nuevoNodo -> nodo_anterior = ptrFinal;
    nuevoNodo ->nodo_siguiente = ptrCabecera;
    ptrCabecera -> nodo_anterior = nuevoNodo;
    ptrFinal = nuevoNodo;
    return nuevoNodo;// devolvemos nuevo nodo en lugar de un puntero doble
  }
}
